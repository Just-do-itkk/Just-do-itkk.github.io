<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 4.2.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next-my.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">


<script id="hexo-configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    hostname: new URL('http://yoursite.com').hostname,
    root: '/',
    scheme: 'Gemini',
    version: '7.6.0',
    exturl: false,
    sidebar: {"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},
    copycode: {"enable":false,"show_result":false,"style":null},
    back2top: {"enable":true,"sidebar":false,"scrollpercent":false},
    bookmark: {"enable":false,"color":"#222","save":"auto"},
    fancybox: false,
    mediumzoom: false,
    lazyload: false,
    pangu: false,
    comments: {"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},
    algolia: {
      appID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    },
    localsearch: {"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},
    path: '',
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}
  };
</script>

  <meta name="description" content="脉冲调制是实质上是在讨论有关信源编码的实现方法，因为无论是对模拟信号进行模拟脉冲调制还是数字脉冲调制，在整个过程中调制信号仍然是可以通过基带信道进行传输的。这样正好承接了之后对基带脉冲传输的讨论。所以说这一章内容的本质还是对于信号的处理方法，根本目的是通过对信号的处理，寻找到一些具有更好的能量利用率和带宽利用率的信号传输方式，实现更可靠的信息传输系统。">
<meta property="og:type" content="article">
<meta property="og:title" content="通信原理（三）——脉冲调制">
<meta property="og:url" content="http://yoursite.com/2020/01/31/2-3-1%E9%80%9A%E4%BF%A1%E5%8E%9F%E7%90%86%E2%80%94%E2%80%94%E8%84%89%E5%86%B2%E8%B0%83%E5%88%B6/index.html">
<meta property="og:site_name" content="Just do it">
<meta property="og:description" content="脉冲调制是实质上是在讨论有关信源编码的实现方法，因为无论是对模拟信号进行模拟脉冲调制还是数字脉冲调制，在整个过程中调制信号仍然是可以通过基带信道进行传输的。这样正好承接了之后对基带脉冲传输的讨论。所以说这一章内容的本质还是对于信号的处理方法，根本目的是通过对信号的处理，寻找到一些具有更好的能量利用率和带宽利用率的信号传输方式，实现更可靠的信息传输系统。">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://yoursite.com/2020/01/31/2-3-1%E9%80%9A%E4%BF%A1%E5%8E%9F%E7%90%86%E2%80%94%E2%80%94%E8%84%89%E5%86%B2%E8%B0%83%E5%88%B6/p1.png">
<meta property="og:image" content="http://yoursite.com/2020/01/31/2-3-1%E9%80%9A%E4%BF%A1%E5%8E%9F%E7%90%86%E2%80%94%E2%80%94%E8%84%89%E5%86%B2%E8%B0%83%E5%88%B6/p2.png">
<meta property="og:image" content="http://yoursite.com/2020/01/31/2-3-1%E9%80%9A%E4%BF%A1%E5%8E%9F%E7%90%86%E2%80%94%E2%80%94%E8%84%89%E5%86%B2%E8%B0%83%E5%88%B6/p3.png">
<meta property="og:image" content="http://yoursite.com/2020/01/31/2-3-1%E9%80%9A%E4%BF%A1%E5%8E%9F%E7%90%86%E2%80%94%E2%80%94%E8%84%89%E5%86%B2%E8%B0%83%E5%88%B6/p4.png">
<meta property="og:image" content="http://yoursite.com/2020/01/31/2-3-1%E9%80%9A%E4%BF%A1%E5%8E%9F%E7%90%86%E2%80%94%E2%80%94%E8%84%89%E5%86%B2%E8%B0%83%E5%88%B6/p5.png">
<meta property="article:published_time" content="2020-01-31T09:30:24.000Z">
<meta property="article:modified_time" content="2020-01-31T09:38:34.943Z">
<meta property="article:author" content="KZB">
<meta property="article:tag" content="通信原理">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://yoursite.com/2020/01/31/2-3-1%E9%80%9A%E4%BF%A1%E5%8E%9F%E7%90%86%E2%80%94%E2%80%94%E8%84%89%E5%86%B2%E8%B0%83%E5%88%B6/p1.png">

<link rel="canonical" href="http://yoursite.com/2020/01/31/2-3-1%E9%80%9A%E4%BF%A1%E5%8E%9F%E7%90%86%E2%80%94%E2%80%94%E8%84%89%E5%86%B2%E8%B0%83%E5%88%B6/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome: false,
    isPost: true
  };
</script>

  <title>通信原理（三）——脉冲调制 | Just do it</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-meta">

    <div>
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Just do it</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
        <p class="site-subtitle">吉良吉影想过平静的生活</p>
  </div>

  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>
</div>


<nav class="site-nav">
  
  <ul id="menu" class="menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-fw fa-home#首页"></i>Home</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-fw fa-tags#标签"></i>Tags</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-fw fa-th#分类"></i>Categories</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-fw fa-archive#归档"></i>Archives</a>

  </li>
  </ul>

</nav>
</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content">
            

  <div class="posts-expand">
      
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block " lang="en">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2020/01/31/2-3-1%E9%80%9A%E4%BF%A1%E5%8E%9F%E7%90%86%E2%80%94%E2%80%94%E8%84%89%E5%86%B2%E8%B0%83%E5%88%B6/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="KZB">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Just do it">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          通信原理（三）——脉冲调制
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">Posted on</span>
              

              <time title="Created: 2020-01-31 17:30:24 / Modified: 17:38:34" itemprop="dateCreated datePublished" datetime="2020-01-31T17:30:24+08:00">2020-01-31</time>
            </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/%E9%80%9A%E4%BF%A1%E5%8E%9F%E7%90%86/" itemprop="url" rel="index">
                    <span itemprop="name">通信原理</span>
                  </a>
                </span>
            </span>

          
            <span id="/2020/01/31/2-3-1%E9%80%9A%E4%BF%A1%E5%8E%9F%E7%90%86%E2%80%94%E2%80%94%E8%84%89%E5%86%B2%E8%B0%83%E5%88%B6/" class="post-meta-item leancloud_visitors" data-flag-title="通信原理（三）——脉冲调制" title="Views">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">Views: </span>
              <span class="leancloud-visitors-count"></span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p>脉冲调制是实质上是在讨论有关信源编码的实现方法，因为无论是对模拟信号进行模拟脉冲调制还是数字脉冲调制，在整个过程中调制信号仍然是可以通过基带信道进行传输的。这样正好承接了之后对基带脉冲传输的讨论。所以说这一章内容的本质还是对于信号的处理方法，根本目的是通过对信号的处理，寻找到一些具有更好的能量利用率和带宽利用率的信号传输方式，实现更可靠的信息传输系统。<a id="more"></a></p>
<p>模拟脉冲调制将信号的时域信息进行离散化，数字脉冲调制将信号的时域和幅域信息均进行离散化操作。我们要关注的是怎样实现脉冲调制操作的（在实现有意义的离散化操作的过程中有哪些限制，有哪些优化的方法），将信号进行脉冲调制之后我们又是如何将其恢复成原始信号的（恢复的信号和原始信号相比有没有性能的损失？怎样才能将失真和噪声尽可能地降低？），各个脉冲调制系统性能的差异从何体现。</p>
<h2 id="知识总结："><a href="#知识总结：" class="headerlink" title="知识总结："></a>知识总结：</h2><h3 id="1、信号时域离散化——抽样过程"><a href="#1、信号时域离散化——抽样过程" class="headerlink" title="1、信号时域离散化——抽样过程"></a>1、信号时域离散化——抽样过程</h3><p>  抽样过程可以分为自然抽样和平顶抽样，之所以会有这两种抽样方式的划分主要还是真正的抽样我们是用具有一定的宽度的脉冲信号进行的，脉冲信号的幅度在抽样的过程中是否会随着消息信号的幅度变化就是区分自然抽样和平顶抽样的依据。</p>
<p>  抽样过程在实际理论分析的时候首先还是使用理想冲激信号{$g_\delta(t)$}，这样可以更加明确的得知我们在对信号进行时域离散化的过程中需要确定的限制条件。一切操作都是有目的的，抽样的目的是用更少的信息来尽可能完整的表示一个信号，而使用理想冲击信号对一个信号进行抽样时，我们可以控制的指标主要还是抽样的时间间隔$T_s$。我们要保证抽样的时间间隔不能太长，不然抽样的信息点太少就没有办法能完整的表示原始的消息信号了。而考虑时间间隔时，我们可以借助信号的傅里叶变换来进行更直观的分析，由此得到奈奎斯特抽样定理对于抽样速度/时间的限制，就是抽样速率必须要大于或等于严格带限消息信号频谱中最大频率的两倍。这样才能保证抽取的离散信号是有意义的，否则在抽样的过程中会出现混叠的情况，在频域上表现为抽样信号频谱出现重合。</p>
<p>  在实际中，不严格带限的信号可以通过一个低通抗混叠滤波器来抑制对于消息信号不重要的高频分量，或者提升抽样的速率，来使得抽样有意义。</p>
<h3 id="2、模拟脉冲调制"><a href="#2、模拟脉冲调制" class="headerlink" title="2、模拟脉冲调制"></a>2、模拟脉冲调制</h3><p>  模拟脉冲调制只需要在时域上对消息信号进行离散化，所以搞清楚了抽样的过程就可以分析在模拟脉冲调制中对于信号的整个处理过程了。前面已经提到过实际中是可以用矩形脉冲信号来对消息信号进行处理的，所以书中主要讨论了平顶抽样情况下的模拟脉冲幅度调制，实现的过程就是每隔$T_s$秒对消息信号进行一次瞬时抽样，然后通过电路将这个抽样值保持一个固定的时间$T$。通过延长样值的持续时间可以避免占用过多的带宽，带宽和脉冲宽度是成反比的。</p>
<p>  脉冲幅度调制是通过脉冲的幅度来表征消息信号的，可以理解为消息信号经过单位冲击序列抽样后的消息序列{$m_\delta(t)$}，在对应的时间用一个持续时间为$T$的幅值与脉冲幅值相等矩形脉冲来表$h(t)$示的一连串脉冲信号$s(t)$，这在数学表示上就可以写为$s(t)=m_\delta(t)*h(t)$。</p>
<p>变换到频域就是$S(f)=f_s\sum_{k=-\infty}^{+\infty M(f-kf_s)}H(f)$。这个式子在频域的角度理解就是一个每隔$f_s$的间隔有一个以$nf_s$为中心的消息信号频谱图形的信号通过频率响应为$H(f)$的低通滤波器。</p>
<p>通过抽样过程得到的PAM信号由于矩形信号的原因，会存在幅度失真和$\frac T 2$的时间延迟，这种失真又叫孔径效应。将PAM信号恢复成原始信号的过程就是要从PAM的信号频谱恢复出消息信号$m(t)$的频谱，方法就是先滤波，再通过使用幅度响应为$\frac 1 {|H(f)|}$的滤波器来抵消矩形脉冲频谱对信号的影响。实际中$\frac T {T_s}\le0.1$时失真可忽略，无需均衡器。</p>
<p>PAM信号的噪声性能永远好于基带信号传输。</p>
<p>  模拟脉冲调制除了PAM这种之外，还有PDM（脉冲持续时间调制）和PPM（脉冲相位调制）这两种调制方法，PDM相比于PPM，其实并没有携带更多的消息，但是长时间的脉冲持续会消耗更多的功率，所以理所当然的PPM是一种更有效的模拟脉冲调制方法。</p>
<p>  在研究PPM的时候，主要关注的还是带宽和噪声的权衡。因为PPM的基本原理还是通过脉冲在一个抽样周期出现的相对位置来表征消息信号的信息。噪声会使脉冲出现的位置出现偏差，我们虽然可以通过减小脉冲的持续时间来降低噪声的影响，但随之带来的问题就是持续时间降低会使得矩形脉冲的带宽增加，这使我们不愿意看到的。所以PPM受到噪声的影响是必然的。</p>
<p>  PPM系统噪声性能的特点和FM系统的噪声性能特点很相似：<br>     １）解调增益和传输带宽关于消息带宽的归一化值得平方成正比。</p>
<p>​    ２）随着信噪比得减小，系统会出现门限效应。</p>
<p>  由此我们可以通过增大传输带宽来提高系统的噪声性能，平方律关系对于连续波调制和模拟脉冲调制来说都是提升噪声性能最有效的方法。比平方律更有效的方法就是使用数字脉冲调制。</p>
<h3 id="3、量化过程"><a href="#3、量化过程" class="headerlink" title="3、量化过程"></a>3、量化过程</h3><p>  量化过程是将消息信号抽样值的连续幅值转换为离散幅值。我们通过量化器将幅值进行离散化，量化器通过量化级数是否均匀分成均匀量化器和非均匀量化器。　量化器在量化的模式上还可以分为中升型和中平型，关键看输入输出特性里是否把0作为一个输出的判定级数。</p>
<p>量化这个过程是用预设好的量化级数来表示模拟信号，在这个转化过程中自然而然输出值和实际值之间存在偏差，这个误差可以看成是数字脉冲调制过程中引入的噪声——量化噪声。通过推导可以得出，量化器的输出信噪比随着样值的比特数R的增大而呈指数级增长。但是R的增大需要信道传输带宽$B_T$成比例的增大，所以所二进制编码表示消息信号可以实现一种增大带宽来换取噪声性能的方法，这种方法的效率要高于FM和PPM（PPM系统和FM系统的性能受到接收机噪声的影响，二进制编码系统的性能受到量化噪声的影响）。</p>
<p>  （标量量化器的最优化条件）</p>
<h3 id="4、脉冲编码调制（PCM）"><a href="#4、脉冲编码调制（PCM）" class="headerlink" title="4、脉冲编码调制（PCM）"></a>4、脉冲编码调制（PCM）</h3><p>  PCM是一种最基本的数字脉冲调制方式。PCM系统的组成如下：</p>
<p><img src="/2020/01/31/2-3-1%E9%80%9A%E4%BF%A1%E5%8E%9F%E7%90%86%E2%80%94%E2%80%94%E8%84%89%E5%86%B2%E8%B0%83%E5%88%B6/p1.png" alt="img"></p>
<p>在PCM系统发射机部分，对消息信号进行抽样、量化、编码；在接受机部分，对消息信号进行再生、译码、量化样值的重构。抽样过程将持续时间有限的信号离散化为每秒存在有限个离散值的信号。量化的过程在实际中除了可以使用均匀量化的方式，其实更加倾向于采用可变间隔的非均匀量化方式。例如通过牺牲大信号，使需要更多保护的小信号得改善。非均匀量化器等价于将基带信号通过压缩器后再进行均匀量化。常用的两个压缩律是$\mu$律和A律。编码的过程就是将离散量化值用一个特定的码元来表示，一般都是用二进制码来表示；编码后的每个码元“1”和“0”使用特定的线路码来表示，就可以将表示消息信号的二进制电平使用线路码作为信号发送给接收机。在书中介绍了双极性NRZ、单极性NRZ、双极性RZ、单极性RZ和曼彻斯特码，它们的频谱不太一样，值得注意的是双极性RZ和曼彻斯特码零频率点功率谱密度为零，即功率谱没有直流分量。</p>
<p>差分编码是一种常用的编码方式，给定一个参考比特后，用下一个码元和前一个码元的越变与否来进行编码。</p>
<p>再生体现了PCM系统对失真和噪声的控制能力，再生中继器通过均衡来补偿信道传输中的幅度相位失真，通过定时保证再信噪比最大的瞬间对均衡后的脉冲信号进行抽样，再对提取的样值进行判决。</p>
<p>最后译码、滤波（低通滤波），恢复出消息信号。</p>
<p>PCM系统性能所受到的噪声影响主要包括信道噪声和量化噪声。信道噪声主要是在接收信号中引入了比特差错，量化噪声主要受量化级数和压缩方法的影响。这些都可以通过采取足够好的设计方式忽略不计，这也正是PCM调制的优势体现：通过增大带宽和提高发射功率，可以构造出不受信道噪声影响的通信系统。PCM的再生可以实现很好的重构过程。</p>
<h2 id="Matlab仿真"><a href="#Matlab仿真" class="headerlink" title="Matlab仿真"></a>Matlab仿真</h2><h3 id="1、数字基带信号的功率谱密度"><a href="#1、数字基带信号的功率谱密度" class="headerlink" title="1、数字基带信号的功率谱密度"></a>1、数字基带信号的功率谱密度</h3><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">%数字基带信号的功率谱密度</span></span><br><span class="line">clear all;  close all;</span><br><span class="line">Ts=<span class="number">1</span>;</span><br><span class="line">N_sample = <span class="number">8</span>;              <span class="comment">%每个码元的抽样点数</span></span><br><span class="line">dt = Ts/N_sample;          <span class="comment">%抽样时间间隔</span></span><br><span class="line">N = <span class="number">1000</span>;                  <span class="comment">%码元数</span></span><br><span class="line"></span><br><span class="line">t = <span class="number">0</span>:dt:(N*N_sample<span class="number">-1</span>)*dt;</span><br><span class="line"> </span><br><span class="line">gt1 = <span class="built_in">ones</span>(<span class="number">1</span>,N_sample);    <span class="comment">%NRZ非归零波形</span></span><br><span class="line">gt2 = <span class="built_in">ones</span>(<span class="number">1</span>,N_sample/<span class="number">2</span>);  <span class="comment">%RZ归零波形</span></span><br><span class="line">gt2 = [gt2 <span class="built_in">zeros</span>(<span class="number">1</span>,N_sample/<span class="number">2</span>)];</span><br><span class="line">mt3 = sinc((t<span class="number">-5</span>)/Ts);          <span class="comment">% sin(pi*t/Ts)/(pi*t/Ts)波形，截段取10个码元</span></span><br><span class="line">gt3 = mt3(<span class="number">1</span>:<span class="number">10</span>*N_sample);</span><br><span class="line">d = ( <span class="built_in">sign</span>( <span class="built_in">randn</span>(<span class="number">1</span>,N) ) +<span class="number">1</span> )/<span class="number">2</span>;</span><br><span class="line">data = sigexpand(d,N_sample); <span class="comment">%对序列间隔插入N_sample-1个0</span></span><br><span class="line"></span><br><span class="line">st1 = conv(data,gt1);         <span class="comment">%Matlab自带卷积函数</span></span><br><span class="line">st2 = conv(data,gt2);</span><br><span class="line">d   =  <span class="number">2</span>*d<span class="number">-1</span>;                 <span class="comment">%变成双极性序列</span></span><br><span class="line">data=  sigexpand(d,N_sample); </span><br><span class="line">st3 = conv(data,gt3);</span><br><span class="line"> </span><br><span class="line">[f,st1f] = T2F(t,[st1(<span class="number">1</span>:<span class="built_in">length</span>(t))]);</span><br><span class="line">[f,st2f] = T2F(t,[st2(<span class="number">1</span>:<span class="built_in">length</span>(t))]);</span><br><span class="line">[f,st3f] = T2F(t,[st3(<span class="number">1</span>:<span class="built_in">length</span>(t))]);</span><br><span class="line"> </span><br><span class="line"><span class="built_in">figure</span>(<span class="number">1</span>)</span><br><span class="line">subplot(<span class="number">321</span>)</span><br><span class="line"><span class="built_in">plot</span>(t,[st1(<span class="number">1</span>:<span class="built_in">length</span>(t))] );grid</span><br><span class="line">axis([<span class="number">0</span> <span class="number">20</span> <span class="number">-1.5</span> <span class="number">1.5</span>]);ylabel(<span class="string">'单极性NRZ波形'</span>);</span><br><span class="line">subplot(<span class="number">322</span>);</span><br><span class="line"><span class="built_in">plot</span>(f,<span class="number">10</span>*<span class="built_in">log10</span>(<span class="built_in">abs</span>(st1f).^<span class="number">2</span>) );grid</span><br><span class="line">axis([<span class="number">-5</span> <span class="number">5</span> <span class="number">-40</span> <span class="number">10</span>]); ylabel(<span class="string">'单极性NRZ功率谱密度(dB/Hz)'</span>);</span><br><span class="line"> </span><br><span class="line">subplot(<span class="number">323</span>)</span><br><span class="line"><span class="built_in">plot</span>(t,[st2(<span class="number">1</span>:<span class="built_in">length</span>(t))] );</span><br><span class="line">axis([<span class="number">0</span> <span class="number">20</span> <span class="number">-1.5</span> <span class="number">1.5</span>]);grid</span><br><span class="line">ylabel(<span class="string">'单极性RZ波形'</span>);</span><br><span class="line">subplot(<span class="number">324</span>)</span><br><span class="line"><span class="built_in">plot</span>(f,<span class="number">10</span>*<span class="built_in">log10</span>(<span class="built_in">abs</span>(st2f).^<span class="number">2</span>));</span><br><span class="line">axis([<span class="number">-5</span> <span class="number">5</span> <span class="number">-40</span> <span class="number">10</span>]);grid</span><br><span class="line">ylabel(<span class="string">'单极性RZ功率谱密度(dB/Hz)'</span>);</span><br><span class="line"> </span><br><span class="line">subplot(<span class="number">325</span>)</span><br><span class="line"><span class="built_in">plot</span>(t<span class="number">-5</span>,[st3(<span class="number">1</span>:<span class="built_in">length</span>(t))] );</span><br><span class="line">axis([<span class="number">0</span> <span class="number">20</span> <span class="number">-2</span> <span class="number">2</span>]);grid</span><br><span class="line">ylabel(<span class="string">'双极性sinc波形'</span>);xlabel(<span class="string">'t/Ts'</span>);</span><br><span class="line">subplot(<span class="number">326</span>)</span><br><span class="line"><span class="built_in">plot</span>(f,<span class="number">10</span>*<span class="built_in">log10</span>(<span class="built_in">abs</span>(st3f).^<span class="number">2</span>));</span><br><span class="line">axis([<span class="number">-5</span> <span class="number">5</span> <span class="number">-40</span> <span class="number">10</span>]);grid</span><br><span class="line">ylabel(<span class="string">'sinc波形功率谱密度(dB/Hz)'</span>);xlabel(<span class="string">'f*Ts'</span>);</span><br></pre></td></tr></table></figure>
<p><img src="/2020/01/31/2-3-1%E9%80%9A%E4%BF%A1%E5%8E%9F%E7%90%86%E2%80%94%E2%80%94%E8%84%89%E5%86%B2%E8%B0%83%E5%88%B6/p2.png" alt="img"></p>
<h3 id="2、u律和A律量化"><a href="#2、u律和A律量化" class="headerlink" title="2、u律和A律量化"></a>2、u律和A律量化</h3><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">%u=255   y=ln(1+ux)/ln(1+u)</span></span><br><span class="line"><span class="comment">%A=87.6  y=Ax/(1+lnA) (0&lt;x&lt;1/A)   y=(1+lnAx)/(1+lnA)</span></span><br><span class="line">clear all</span><br><span class="line">close all</span><br><span class="line">dx=<span class="number">0.01</span>;</span><br><span class="line">x=<span class="number">-1</span>:dx:<span class="number">1</span>;</span><br><span class="line">u=<span class="number">255</span>;</span><br><span class="line">A=<span class="number">87.6</span>;</span><br><span class="line"> </span><br><span class="line"><span class="comment">%u Law</span></span><br><span class="line">yu=<span class="built_in">sign</span>(x).*<span class="built_in">log</span>(<span class="number">1</span>+u*<span class="built_in">abs</span>(x))/<span class="built_in">log</span>(<span class="number">1</span>+u);</span><br><span class="line"><span class="comment">%A Law</span></span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span>=<span class="number">1</span>:<span class="built_in">length</span>(x)</span><br><span class="line">   <span class="keyword">if</span> <span class="built_in">abs</span>(x(<span class="built_in">i</span>))&lt;<span class="number">1</span>/A</span><br><span class="line">      ya(<span class="built_in">i</span>)=A*x(<span class="built_in">i</span>)/(<span class="number">1</span>+<span class="built_in">log</span>(A));</span><br><span class="line">   <span class="keyword">else</span></span><br><span class="line">      ya(<span class="built_in">i</span>)=<span class="built_in">sign</span>(x(<span class="built_in">i</span>))*(<span class="number">1</span>+<span class="built_in">log</span>(A*<span class="built_in">abs</span>(x(<span class="built_in">i</span>))))/(<span class="number">1</span>+<span class="built_in">log</span>(A));</span><br><span class="line">   <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"> </span><br><span class="line"><span class="built_in">figure</span>(<span class="number">1</span>)</span><br><span class="line"><span class="built_in">plot</span>(x,yu,<span class="string">'k.:'</span>);</span><br><span class="line">title(<span class="string">'u Law'</span>)</span><br><span class="line">xlabel(<span class="string">'x'</span>);</span><br><span class="line">ylabel(<span class="string">'y'</span>);</span><br><span class="line">grid on</span><br><span class="line"><span class="built_in">hold</span> on</span><br><span class="line">xx=[<span class="number">-1</span>,<span class="number">-127</span>/<span class="number">255</span>,<span class="number">-63</span>/<span class="number">255</span>,<span class="number">-31</span>/<span class="number">255</span>,<span class="number">-15</span>/<span class="number">255</span>,<span class="number">-7</span>/<span class="number">255</span>,<span class="number">-3</span>/<span class="number">255</span>,<span class="number">-1</span>/<span class="number">255</span>,<span class="number">1</span>/<span class="number">255</span>,<span class="number">3</span>/<span class="number">255</span>,<span class="number">7</span>/<span class="number">255</span>,<span class="number">15</span>/<span class="number">255</span>,<span class="number">31</span>/<span class="number">255</span>,<span class="number">63</span>/<span class="number">255</span>,...</span><br><span class="line">      <span class="number">127</span>/<span class="number">255</span>,<span class="number">1</span>];</span><br><span class="line">yy=[<span class="number">-1</span>,<span class="number">-7</span>/<span class="number">8</span>,<span class="number">-6</span>/<span class="number">8</span>,<span class="number">-5</span>/<span class="number">8</span>,<span class="number">-4</span>/<span class="number">8</span>,<span class="number">-3</span>/<span class="number">8</span>,<span class="number">-2</span>/<span class="number">8</span>,<span class="number">-1</span>/<span class="number">8</span>,<span class="number">1</span>/<span class="number">8</span>,<span class="number">2</span>/<span class="number">8</span>,<span class="number">3</span>/<span class="number">8</span>,<span class="number">4</span>/<span class="number">8</span>,<span class="number">5</span>/<span class="number">8</span>,<span class="number">6</span>/<span class="number">8</span>,<span class="number">7</span>/<span class="number">8</span>,<span class="number">1</span>];</span><br><span class="line"><span class="built_in">plot</span>(xx,yy,<span class="string">'r'</span>);</span><br><span class="line">stem(xx,yy,<span class="string">'b-.'</span>);</span><br><span class="line"><span class="built_in">legend</span>(<span class="string">'u律压缩特性'</span>,<span class="string">'折线近似u律'</span>);</span><br><span class="line"> </span><br><span class="line"> </span><br><span class="line"><span class="built_in">figure</span>(<span class="number">2</span>)</span><br><span class="line"><span class="built_in">plot</span>(x,ya,<span class="string">'k.:'</span>);</span><br><span class="line">title(<span class="string">'A Law'</span>)</span><br><span class="line">xlabel(<span class="string">'x'</span>);</span><br><span class="line">ylabel(<span class="string">'y'</span>);</span><br><span class="line">grid on</span><br><span class="line"><span class="built_in">hold</span> on</span><br><span class="line">xx=[<span class="number">-1</span>,<span class="number">-1</span>/<span class="number">2</span>,<span class="number">-1</span>/<span class="number">4</span>,<span class="number">-1</span>/<span class="number">8</span>,<span class="number">-1</span>/<span class="number">16</span>,<span class="number">-1</span>/<span class="number">32</span>,<span class="number">-1</span>/<span class="number">64</span>,<span class="number">-1</span>/<span class="number">128</span>,<span class="number">1</span>/<span class="number">128</span>,<span class="number">1</span>/<span class="number">64</span>,<span class="number">1</span>/<span class="number">32</span>,<span class="number">1</span>/<span class="number">16</span>,<span class="number">1</span>/<span class="number">8</span>,<span class="number">1</span>/<span class="number">4</span>,<span class="number">1</span>/<span class="number">2</span>,<span class="number">1</span>];</span><br><span class="line">yy=[<span class="number">-1</span>,<span class="number">-7</span>/<span class="number">8</span>,<span class="number">-6</span>/<span class="number">8</span>,<span class="number">-5</span>/<span class="number">8</span>,<span class="number">-4</span>/<span class="number">8</span>,<span class="number">-3</span>/<span class="number">8</span>,<span class="number">-2</span>/<span class="number">8</span>,<span class="number">-1</span>/<span class="number">8</span>,<span class="number">1</span>/<span class="number">8</span>,<span class="number">2</span>/<span class="number">8</span>,<span class="number">3</span>/<span class="number">8</span>,<span class="number">4</span>/<span class="number">8</span>,<span class="number">5</span>/<span class="number">8</span>,<span class="number">6</span>/<span class="number">8</span>,<span class="number">7</span>/<span class="number">8</span>,<span class="number">1</span>];</span><br><span class="line"><span class="built_in">plot</span>(xx,yy,<span class="string">'r'</span>);</span><br><span class="line">stem(xx,yy,<span class="string">'b-.'</span>);</span><br><span class="line"><span class="built_in">legend</span>(<span class="string">'A律压缩特性'</span>,<span class="string">'折线近似A律'</span>);</span><br></pre></td></tr></table></figure>
<p><img src="/2020/01/31/2-3-1%E9%80%9A%E4%BF%A1%E5%8E%9F%E7%90%86%E2%80%94%E2%80%94%E8%84%89%E5%86%B2%E8%B0%83%E5%88%B6/p3.png" alt="img"></p>
<p><img src="/2020/01/31/2-3-1%E9%80%9A%E4%BF%A1%E5%8E%9F%E7%90%86%E2%80%94%E2%80%94%E8%84%89%E5%86%B2%E8%B0%83%E5%88%B6/p4.png" alt="img"></p>
<h3 id="3、脉冲编码调制过程（编码、解码）"><a href="#3、脉冲编码调制过程（编码、解码）" class="headerlink" title="3、脉冲编码调制过程（编码、解码）"></a>3、脉冲编码调制过程（编码、解码）</h3><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">%PCM的编码和解码过程</span></span><br><span class="line">clear all</span><br><span class="line">close all</span><br><span class="line">t=<span class="number">0</span>:<span class="number">0.01</span>:<span class="number">10</span>;        <span class="comment">%时间</span></span><br><span class="line">vm1=<span class="number">-70</span>:<span class="number">1</span>:<span class="number">0</span>;        <span class="comment">%输入的正弦信号幅度不同</span></span><br><span class="line">vm = <span class="number">10.</span>^(vm1/<span class="number">20</span>); </span><br><span class="line"><span class="built_in">figure</span>(<span class="number">1</span>)</span><br><span class="line"><span class="keyword">for</span> k=<span class="number">1</span>:<span class="built_in">length</span>(vm)</span><br><span class="line">  <span class="keyword">for</span> m=<span class="number">1</span>:<span class="number">2</span></span><br><span class="line">      x=vm(k)*<span class="built_in">sin</span>(<span class="number">2</span>*<span class="built_in">pi</span>*t+<span class="number">2</span>*<span class="built_in">pi</span>*<span class="built_in">rand</span>(<span class="number">1</span>));</span><br><span class="line">      v=<span class="number">1</span>;</span><br><span class="line">      xx=x/v;   <span class="comment">%线性化</span></span><br><span class="line">      sxx = <span class="built_in">floor</span>(xx*<span class="number">4096</span>);</span><br><span class="line">      y = pcm_encode(sxx);  <span class="comment">%PCM编码</span></span><br><span class="line">      yy = pcm_decode(y,v); <span class="comment">%PCM解码</span></span><br><span class="line"> </span><br><span class="line">      nq(m)=sum((x-yy).*(x-yy))/<span class="built_in">length</span>(x);</span><br><span class="line">      sq(m)=<span class="built_in">mean</span>(yy.^<span class="number">2</span>);</span><br><span class="line">      snr(m)=(sq(m)/nq(m));</span><br><span class="line"></span><br><span class="line">      drawnow</span><br><span class="line">      subplot(<span class="number">211</span>)</span><br><span class="line">      <span class="built_in">plot</span>(t,x);</span><br><span class="line">      title(<span class="string">'sample sequence'</span>);</span><br><span class="line">      subplot(<span class="number">212</span>)</span><br><span class="line">      <span class="built_in">plot</span>(t,yy)</span><br><span class="line">      title(<span class="string">'pcm decode sequence'</span>);</span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">      snrq(k)=<span class="number">10</span>*<span class="built_in">log10</span>( <span class="built_in">mean</span>(snr) );</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">figure</span>(<span class="number">2</span>)</span><br><span class="line"><span class="built_in">plot</span>(vm1,snrq);</span><br><span class="line">axis([<span class="number">-60</span> <span class="number">0</span> <span class="number">0</span> <span class="number">60</span>]);</span><br><span class="line">grid;</span><br></pre></td></tr></table></figure>
<p><img src="/2020/01/31/2-3-1%E9%80%9A%E4%BF%A1%E5%8E%9F%E7%90%86%E2%80%94%E2%80%94%E8%84%89%E5%86%B2%E8%B0%83%E5%88%B6/p5.png" alt="img"></p>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E9%80%9A%E4%BF%A1%E5%8E%9F%E7%90%86/" rel="tag"># 通信原理</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2020/01/29/3-1%E9%80%9A%E4%BF%A1%E7%BD%91%E7%AC%94%E8%AE%B0%EF%BC%88%E4%B8%80%EF%BC%89/" rel="prev" title="通信网笔记（一）">
      <i class="fa fa-chevron-left"></i> 通信网笔记（一）
    </a></div>
      <div class="post-nav-item">
    <a href="/2020/02/11/2-4-1%E9%80%9A%E4%BF%A1%E5%8E%9F%E7%90%86%E2%80%94%E2%80%94%E5%9F%BA%E5%B8%A6%E8%84%89%E5%86%B2%E4%BC%A0%E8%BE%93/" rel="next" title="通信原理（四）——基带脉冲传输">
      通信原理（四）——基带脉冲传输 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  

  </div>


          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#知识总结："><span class="nav-number">1.</span> <span class="nav-text">知识总结：</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1、信号时域离散化——抽样过程"><span class="nav-number">1.1.</span> <span class="nav-text">1、信号时域离散化——抽样过程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2、模拟脉冲调制"><span class="nav-number">1.2.</span> <span class="nav-text">2、模拟脉冲调制</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3、量化过程"><span class="nav-number">1.3.</span> <span class="nav-text">3、量化过程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4、脉冲编码调制（PCM）"><span class="nav-number">1.4.</span> <span class="nav-text">4、脉冲编码调制（PCM）</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Matlab仿真"><span class="nav-number">2.</span> <span class="nav-text">Matlab仿真</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1、数字基带信号的功率谱密度"><span class="nav-number">2.1.</span> <span class="nav-text">1、数字基带信号的功率谱密度</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2、u律和A律量化"><span class="nav-number">2.2.</span> <span class="nav-text">2、u律和A律量化</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3、脉冲编码调制过程（编码、解码）"><span class="nav-number">2.3.</span> <span class="nav-text">3、脉冲编码调制过程（编码、解码）</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">KZB</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">12</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">KZB</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> v4.2.0
  </div>
  <span class="post-meta-divider">|</span>
  <div class="theme-info">Theme – <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> v7.6.0
  </div>

        






  <script>
  function leancloudSelector(url) {
    url = encodeURI(url);
    return document.getElementById(url).querySelector('.leancloud-visitors-count');
  }
  if (CONFIG.page.isPost) {
    function addCount(Counter) {
      var visitors = document.querySelector('.leancloud_visitors');
      var url = decodeURI(visitors.getAttribute('id'));
      var title = visitors.getAttribute('data-flag-title');

      Counter('get', `/classes/Counter?where=${JSON.stringify({ url })}`)
        .then(response => response.json())
        .then(({ results }) => {
          if (results.length > 0) {
            var counter = results[0];
            Counter('put', '/classes/Counter/' + counter.objectId, { time: { '__op': 'Increment', 'amount': 1 } })
              .then(response => response.json())
              .then(() => {
                leancloudSelector(url).innerText = counter.time + 1;
              })
              .catch(error => {
                console.error('Failed to save visitor count', error);
              })
          } else {
              leancloudSelector(url).innerText = 'Counter not initialized! More info at console err msg.';
              console.error('ATTENTION! LeanCloud counter has security bug, see how to solve it here: https://github.com/theme-next/hexo-leancloud-counter-security. \n However, you can still use LeanCloud without security, by setting `security` option to `false`.');
            
          }
        })
        .catch(error => {
          console.error('LeanCloud Counter Error', error);
        });
    }
  } else {
    function showTime(Counter) {
      var visitors = document.querySelectorAll('.leancloud_visitors');
      var entries = [...visitors].map(element => {
        return decodeURI(element.getAttribute('id'));
      });

      Counter('get', `/classes/Counter?where=${JSON.stringify({ url: { '$in': entries } })}`)
        .then(response => response.json())
        .then(({ results }) => {
          if (results.length === 0) {
            document.querySelectorAll('.leancloud_visitors .leancloud-visitors-count').forEach(element => {
              element.innerText = 0;
            });
            return;
          }
          for (let item of results) {
            let { url, time } = item;
            leancloudSelector(url).innerText = time;
          }
          for (let url of entries) {
            var element = leancloudSelector(url);
            if (element.innerText == '') {
              element.innerText = 0;
            }
          }
        })
        .catch(error => {
          console.error('LeanCloud Counter Error', error);
        });
    }
  }

  fetch('https://app-router.leancloud.cn/2/route?appId=ixgE0yG1deHygJlpEDqkAGOt-gzGzoHsz')
    .then(response => response.json())
    .then(({ api_server }) => {
      var Counter = (method, url, data) => {
        return fetch(`https://${api_server}/1.1${url}`, {
          method: method,
          headers: {
            'X-LC-Id': 'ixgE0yG1deHygJlpEDqkAGOt-gzGzoHsz',
            'X-LC-Key': 'TS4uwvYCAbS55vb76aWCjgX1',
            'Content-Type': 'application/json',
          },
          body: JSON.stringify(data)
        });
      };
      if (CONFIG.page.isPost) {
        if (CONFIG.hostname !== location.hostname) return;
        addCount(Counter);
      } else if (document.querySelectorAll('.post-title-link').length >= 1) {
        showTime(Counter);
      }
    });
  </script>


      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  
      
<script type="text/x-mathjax-config">

  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$', '$'], ['\\(', '\\)'] ],
      processEscapes: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
      equationNumbers: {
        autoNumber: 'AMS'
      }
    }
  });

  MathJax.Hub.Register.StartupHook('TeX Jax Ready', function() {
    MathJax.InputJax.TeX.prefilterHooks.Add(function(data) {
      if (data.display) {
        var next = data.script.nextSibling;
        while (next && next.nodeName.toLowerCase() === '#text') {
          next = next.nextSibling;
        }
        if (next && next.nodeName.toLowerCase() === 'br') {
          next.parentNode.removeChild(next);
        }
      }
    });
  });

  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for (i = 0; i < all.length; i += 1) {
      element = document.getElementById(all[i].inputID + '-Frame').parentNode;
      if (element.nodeName.toLowerCase() == 'li') {
        element = element.parentNode;
      }
      element.classList.add('has-jax');
    }
  });
</script>
<script>
  NexT.utils.getScript('//cdn.jsdelivr.net/npm/mathjax@2/MathJax.js?config=TeX-AMS-MML_HTMLorMML', () => {
    MathJax.Hub.Typeset();
  }, window.MathJax);
</script>

    

  

</body>
</html>
